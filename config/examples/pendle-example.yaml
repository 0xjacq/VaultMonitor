# Example Pendle Configuration

# Platform configuration
platforms:
  - platform: pendle
    enabled: true
    config:
      chainIds: [1, 42161, 10]  # Ethereum, Arbitrum, Optimism
      rateLimit: 50
      circuitBreaker:
        failureThreshold: 5
        resetTimeout: 60000
        halfOpenMaxAttempts: 3

# Example probes
probes:
  # Monitor USDe market on Ethereum
  - id: pendle_usde_market
    platform: pendle
    type: market_apy
    enabled: true
    interval: 60000  # Check every minute
    timeout: 15000
    config:
      chainId: 1
      marketAddress: "0xeaac9b0b4f25cc63255198a3920fcf7752509586"
    rules:
      - id: high_apy_alert
        type: threshold
        fact: pendle.impliedApy
        operator: ">"
        threshold: 0.15  # Alert if APY > 15%
        severity: info
        title: "High Pendle APY Detected"
        messageTemplate: "USDe market APY is {{pendle.impliedApy}}%"
      
      - id: apy_drop_alert
        type: change
        fact: pendle.impliedApy
        threshold: -0.05  # Alert if drops by 5%
        severity: warning
        title: "Pendle APY Dropped"

  # Monitor pool liquidity
  - id: pendle_usde_pool
    platform: pendle
    type: pool_liquidity
    enabled: true
    interval: 300000  # Check every 5 minutes
    timeout: 15000
    config:
      chainId: 1
      poolAddress: "0x..."  # Pool address
    rules:
      - id: liquidity_drop
        type: change
        fact: pendle.totalLiquidity
        threshold: -0.20  # Alert if liquidity drops by 20%
        severity: critical
        title: "Major Liquidity Drop"
